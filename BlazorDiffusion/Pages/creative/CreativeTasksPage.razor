@page "/creatives/{CreativeId}/tasks"
<Breadcrumbs class="mb-8">
    <Breadcrumb>
        Creatives
    </Breadcrumb>
    <Breadcrumb>
        <span>@CreativeId</span>
    </Breadcrumb>
    <Breadcrumb>
        Tasks
    </Breadcrumb>
</Breadcrumbs>

<AutoQueryGrid Model="Creative"
               ShowPreferences="false"
               ShowDownloadCsv="false"
               ShowCopyApiUrl="false"
               RowSelected="RowSelected"
               Apis="Apis.AutoQuery<QueryCreatives,CreateCreative>()"></AutoQueryGrid>

<div>
    <div class="mx-auto max-w-2xl py-16 px-4 sm:py-24 sm:px-6 lg:max-w-7xl lg:px-8">
        <div class="mt-6 grid grid-cols-2 gap-x-4 gap-y-10 sm:gap-x-6 md:grid-cols-4 md:gap-y-0 lg:gap-x-8">
            @if (files is {Count: > 0 })
            {
                @foreach (var preview in files)
                {
                    <div class="group relative">
                        <div class="w-full overflow-hidden rounded-md bg-gray-200 group-hover:opacity-75">
                            <img src="@(preview.GetPublicUrl())" alt="@(preview.FileName)" class="h-full w-full object-cover object-center">
                        </div>
                        <h3 class="mt-4 text-sm">
                            <a href="@(preview.GetPublicUrl())" target="_blank">
                                <span class="absolute inset-0"></span>
                        
                            </a>
                        </h3>
                        <p class="mt-1 text-sm">@(preview.Width) X @(preview.Height) pixels</p>
                        <p class="mt-1 text-sm font-medium">@(preview.ContentLength / 1024)KB</p>
                    </div>
                }
            }
            
            
        </div>
    </div>
</div>

@code {

    [Parameter]
    public string CreativeId { get; set; }

    List<Artifact> files = new();


    private void RowSelected(Creative obj)
    {
        files.Clear();
        files.AddRange(obj.Artifacts);
    }

    private void ImageSelected(Artifact file)
    {
        
    }

}